/* store.js - Copyright (c) 2010-2017 Marcus Westin */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.store=e()}}(function(){return function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return o(r?r:e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){"use strict";var n=e("../src/store-engine"),o=[e("../storages/localStorage"),e("../storages/sessionStorage"),e("../storages/cookieStorage"),e("../storages/memoryStorage")],i=[];t.exports=n.createStore(o,i)},{"../src/store-engine":3,"../storages/cookieStorage":5,"../storages/localStorage":6,"../storages/memoryStorage":7,"../storages/sessionStorage":8}],2:[function(e,t,r){t.exports={name:"store",version:"2.0.7",description:"A localStorage wrapper for all browsers without using cookies or flash. Uses localStorage, globalStorage, and userData behavior under the hood",main:"dist/store.legacy.js",scripts:{test:"make test",version:"make build && git add -A dist",postversion:"git push && git push --tags"},repository:{type:"git",url:"git://github.com/marcuswestin/store.js.git"},author:"Marcus Westin <narcvs@gmail.com>",license:"MIT",bugs:{url:"http://github.com/marcuswestin/store.js/issues"},homepage:"https://github.com/marcuswestin/store.js#readme",devDependencies:{"babel-preset-es2015":"^6.22.0",babelify:"^7.3.0",browserify:"^14.1.0",budo:"^7.1.0",eslint:"^3.12.2",lodash:"^3.10.1",ngrok:"^2.2.6","node-localstorage":"^0.6.0",request:"^2.67.0",tinytest:"^1.1.3","uglify-js":"^2.7.5"},eslintConfig:{env:{browser:!0,commonjs:!0,es6:!0,node:!0},"extends":"eslint:recommended",parserOptions:{sourceType:"module"},globals:{test:!1,assert:!1,print:!1},rules:{"no-unused-vars":["error",{vars:"all",args:"none",varsIgnorePattern:"^_$"}],indent:["error","tab"],"linebreak-style":["error","unix"],semi:["error","never"]}},engines:{node:"*"},directories:{lib:"."}}},{}],3:[function(e,t,r){"use strict";function n(e,t){var r={_seenPlugins:[],_namespacePrefix:"",_namespaceRegexp:null,_legalNamespace:/^[a-zA-Z0-9_\-]+$/,_storage:function(){if(!this.enabled)throw new Error("store.js: No supported storage has been added! Add one (e.g store.addStorage(require('store/storages/cookieStorage')) or use a build with more built-in storages (e.g https://github.com/marcuswestin/store.js/tree/master/dist/store.legacy.min.js)");return this._storage.resolved},_testStorage:function(e){try{var t="__storejs__test__";e.write(t,t);var r=e.read(t)===t;return e.remove(t),r}catch(n){return!1}},_assignPluginFnProp:function(e,t){var r=this[t];this[t]=function(){function t(){if(r)return a(arguments,function(e,t){n[t]=e}),r.apply(o,n)}var n=i(arguments,0),o=this,s=[t].concat(n);return e.apply(o,s)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(e,t){if(!e)return t;var r="";try{r=JSON.parse(e)}catch(n){r=e}return r!==undefined?r:t}},n=u(r,p);return a(e,function(e){n.addStorage(e)}),a(t,function(e){n.addPlugin(e)}),n}var o=e("./util"),i=o.slice,s=o.pluck,a=o.each,u=o.create,c=o.isList,l=o.isFunction,f=o.isObject;t.exports={createStore:n};var p={version:e("../package.json").version,enabled:!1,addStorage:function(e){this.enabled||this._testStorage(e)&&(this._storage.resolved=e,this.enabled=!0)},addPlugin:function(e){var t=this;if(c(e))return void a(e,function(e){t.addPlugin(e)});if(!s(this._seenPlugins,function(t){return e===t})){if(this._seenPlugins.push(e),!l(e))throw new Error("Plugins must be function values that return objects");var r=e.call(this);if(!f(r))throw new Error("Plugins must return an object of function properties");a(r,function(r,n){if(!l(r))throw new Error("Bad plugin property: "+n+" from plugin "+e.name+". Plugins should only return functions.");t._assignPluginFnProp(r,n)})}},get:function(e,t){var r=this._storage().read(this._namespacePrefix+e);return this._deserialize(r,t)},set:function(e,t){return t===undefined?this.remove(e):(this._storage().write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this._storage().remove(this._namespacePrefix+e)},each:function(e){var t=this;this._storage().each(function(r,n){e(t._deserialize(r),n.replace(t._namespaceRegexp,""))})},clearAll:function(){this._storage().clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},namespace:function(e){if(!this._legalNamespace.test(e))throw new Error("store.js namespaces can only have alhpanumerics + underscores and dashes");var t="__storejs_"+e+"_";return u(this,{_namespacePrefix:t,_namespaceRegexp:t?new RegExp("^"+t):null})},createStore:function(e,t){return n(e,t)}}},{"../package.json":2,"./util":4}],4:[function(e,t,r){(function(e){"use strict";function r(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}}function n(e,t){return Array.prototype.slice.call(e,t||0)}function o(e,t){s(e,function(e,r){return t(e,r),!1})}function i(e,t){var r=a(e)?[]:{};return s(e,function(e,n){return r[n]=t(e,n),!1}),r}function s(e,t){if(a(e)){for(var r=0;r<e.length;r++)if(t(e[r],r))return e[r]}else for(var n in e)if(e.hasOwnProperty(n)&&t(e[n],n))return e[n]}function a(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}function u(e){return e&&"[object Function]"==={}.toString.call(e)}function c(e){return e&&"[object Object]"==={}.toString.call(e)}var l=function(){return Object.assign?Object.assign:function(e,t,r,n){for(var i=1;i<arguments.length;i++)o(Object(arguments[i]),function(t,r){e[r]=t});return e}}(),f=function(){if(Object.create)return function(e,t,r,o){var i=n(arguments,1);return l.apply(this,[Object.create(e)].concat(i))};var e=function(){};return function(t,r,o,i){var s=n(arguments,1);return e.prototype=t,l.apply(this,[new e].concat(s))}}(),p=function(){return String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}(),g="undefined"!=typeof window?window:e;t.exports={assign:l,create:f,trim:p,bind:r,slice:n,each:o,map:i,pluck:s,isList:a,isFunction:u,isObject:c,Global:g}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,r){"use strict";function n(e){if(!e||!u(e))return null;var t="(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(p.cookie.replace(new RegExp(t),"$1"))}function o(e){for(var t=p.cookie.split(/; ?/g),r=t.length-1;r>=0;r--)if(f(t[r])){var n=t[r].split("="),o=unescape(n[0]),i=unescape(n[1]);e(i,o)}}function i(e,t){e&&(p.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")}function s(e){e&&u(e)&&(p.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function a(){o(function(e,t){s(t)})}function u(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(p.cookie)}var c=e("../src/util"),l=c.Global,f=c.trim;t.exports={name:"cookieStorage",read:n,write:i,each:o,remove:s,clearAll:a};var p=l.document},{"../src/util":4}],6:[function(e,t,r){"use strict";function n(){return l.localStorage}function o(e){return n().getItem(e)}function i(e,t){return n().setItem(e,t)}function s(e){for(var t=n().length-1;t>=0;t--){var r=n().key(t);e(o(r),r)}}function a(e){return n().removeItem(e)}function u(){return n().clear()}var c=e("../src/util"),l=c.Global;t.exports={name:"localStorage",read:o,write:i,each:s,remove:a,clearAll:u}},{"../src/util":4}],7:[function(e,t,r){"use strict";function n(e){return u[e]}function o(e,t){u[e]=t}function i(e){for(var t in u)u.hasOwnProperty(t)&&e(u[t],t)}function s(e){delete u[e]}function a(e){u={}}t.exports={name:"memoryStorage",read:n,write:o,each:i,remove:s,clearAll:a};var u={}},{}],8:[function(e,t,r){"use strict";function n(){return l.sessionStorage}function o(e){return n().getItem(e)}function i(e,t){return n().setItem(e,t)}function s(e){for(var t=n().length-1;t>=0;t--){var r=n().key(t);e(o(r),r)}}function a(e){return n().removeItem(e)}function u(){return n().clear()}var c=e("../src/util"),l=c.Global;t.exports={name:"sessionStorage",read:o,write:i,each:s,remove:a,clearAll:u}},{"../src/util":4}]},{},[1])(1)});